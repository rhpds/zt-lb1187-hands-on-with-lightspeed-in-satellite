:imagesdir: ../assets/images

= Red Hat Lightspeed advisor in Satellite

In the first several modules of this lab you have done Red Hat Lightspeed exercises while your system is connected to the Hybrid Cloud Console.  However Red Hat is aware that this connectivity can be challenging for some industries or geographies due to company or even governmental policies that restrict the sharing of data.

The Red Hat Lightspeed advisor in Satellite feature is now generally available in Satellite 6.18. The Red Hat Lightspeed vulnerability service is released in technology preview status. The Red Hat Lightspeed advisor in Satellite feature offers the advisor capability as well as remediation. The vulnerability service provides vulnerability scanning.

Please refer to this support document for more information about https://access.redhat.com/support/offerings/techpreview[Technology Preview Features - Scope of Support^].

However once Red Hat Lightspeed advisor in Satellite is enabled the Satellite will not send *any data* to Red Hat.

Red Hat Lightspeed services in Satellite are only enabled through the use of Red Hat Satellite and are delivered as a podman containers that run with the Satellite server. In this lab, Satellite is already pre-installed for you.

== Log into the Satellite Web UI

First, we’ll log into the Red Hat Satellite Web User Interface (UI). Satellite has been preinstalled and installation is out of scope for this lab.

=====
.Log in to the Satellite Web UI
[%collapsible]
====

. Click on the tab labelled Satellite Web UI as shown in the image below.

.Satellite Web UI tab
image::satellite-webui-tab.png[link=self, window=blank, width=100%]

[start=2]
. Log in credentials

To log in, you’ll need the following credentials to log into the Satellite Web UI.

You can copy and paste each of them below.

[source,js]
----
admin
----

[source,js]
----
bc31c9a6-9ff0-11ec-9587-00155d1b0702
----

Now click `+Log In+`.

.Login menu
image::webuilogin.png[../assets/webuilogin]

You will be taken to the main dashboard.

.Satellite WebGUI dashboard
image::main-menu.png[../assets/main-menu]

[start=3]
. Once logged in, on the left hand navigation bar expand the `Red Hat Lightspeed` menu. +

NOTE: Red Hat Lightspeed was formerly known as Red Hat Insights.  In Satellite 6.17 the UI will read Insights. This is expected and will change to Red Hat Lightspeed in Satellite 6.18 and beyond.

You will see `Recommendations` and `Vulnerability`.

image::Sat_Insights_Connected_Menu.png[link=self, window=blank, width=100%]

[start=4]
. Select `Recommendations`.

====
=====

=====
.Performing an analysis
[%collapsible]
====

While in self-hosted mode, you can manually perform a system analysis by running the insights-client command on the host.
This should already be scheduled to be done automatically, but for the purposes of the lab we will go ahead and log into the second RHEL host and manually run this command.

NOTE: Though the name of Insights changed to Red Hat Lightspeed, packages, command lines, and APIs still refer to 'insights'.  As such, the 'insights-client' command is still the correct one to use.

1. From your showroom environment, click the tab labeled `rhel-${guid}-2.lab terminal`.

.rhel-${guid}-2.lab terminal tab
image::host2-terminal.png[../assets/host2-terminal-tab]

[start=2]
2. Run the following command:

[source,bash,run]
----
insights-client
----

Running the insights-client command will collect and upload data to Satellite which will run the advisor analysis locally.

image::self-managed_insights-client_output.png[link=self, window=blank, width=100%]

NOTE: The insights-client will still include output information as if it is connected to console.redhat.com. No information is actually sent to the Hybrid Cloud Console.

====
=====

=====
.Viewing the results and fixing the issue
[%collapsible]
====

Let's fix the issue detected by the advisor.

. While in the Recommendations section, locate the the issue named "Decreased security: OpenSSH ClientAlive settings".

image::decreased-security-advisor.png[]

[start=2]
. Click the issue. You'll be taken to a new menu containing the details of the issue.

image::decreased-security-advisor-details.png[]

[start=3]

. Select the hosts that are affected by the issue by clicking on the checkbox to the left of the host name.

image::selected-hosts.png[]

[start=4]
. Click the `Remediate` button. +
This will open a window that will summarize the recommendation, the resolution, and will let you know if a reboot of the system is needed. +
In this case the resolution is to install the tuned package and set the proper tuned profile which does not require a reboot. +
. Click Remediate. +
This will redirect you to Monitor → Jobs where you can see the job running that you just initiated. This job may take 2-5 minutes to complete. Wait for the results to show success. +

image::remediation-status.png[link=self, window=blank, width=100%]


NOTE: Red Hat Lightspeed will perform its daily analysis of a system just like it does in the hosted model. +
If you wish to perform a manual analysis, you would need to manually run `insights-client` on the host. +

[start=5]
5. Let’s return to the list of Red Hat Lightspeed recommendations. +
In the left hand navigation bar, click Insights -> Recommendations. +
You should notice that the `Decreased security: OpenSSH ClientAlive settings` recommendation no longer appears.

====
=====

=====
.Updates to the list of Recommendations
[%collapsible]
====

In Red Hat Lightspeed, at the Hybrid Cloud Console, new recommendations are added weekly or more frequently if needed.
With Red Hat Lightspeed advisor in Satellite, new recommendations are delivered with container updates.  When you upgrade your Satellite server to the latest release you will need to update the container image to get the latest recommendations and any updates to the advisor engine itself.

====
=====

This module is complete.
